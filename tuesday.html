<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tuesday's Menu</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <header class="menu-header">Tuesday's Menu</header>

        <form id="menuForm">
            <div class="input-group">
                <label for="student-name">Student Name</label>
                <input type="text" id="student-name" required>
            </div>
            <div class="input-group">
                <label for="student-class">Student Class</label>
                <input type="text" id="student-class" required>
            </div>
            <div class="input-group">
                <label for="roll-number">Roll Number</label>
                <input type="text" id="roll-number" required>
            </div>

            <h2>Select any 3 items of your choice</h2>
            <div class="checkbox-group">
                <label><input type="checkbox" name="main-item" value="Vermicelli" class="main-selection"> Vermicelli</label>
                <label><input type="checkbox" name="main-item" value="Fruit Juice" class="main-selection"> Fruit Juice</label>
                <label><input type="checkbox" name="main-item" value="Seasonal fruit" class="main-selection"> Seasonal fruit</label>
                <label><input type="checkbox" name="main-item" value="Dal Paratha" class="main-selection"> Dal Paratha</label>
            </div>

            <h2>Select any one</h2>
            <div class="radio-group">
                <label><input type="radio" name="dessert" value="Jalebi" required> Jalebi</label>
                <label><input type="radio" name="dessert" value="Muffin" required> Muffin</label>
            </div>

            <button type="submit" class="save-button">Save your choice</button>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('menuForm');
            const mainItems = document.querySelectorAll('.main-selection');
            const MAX_SELECTION = 3;

            mainItems.forEach(item => {
                item.addEventListener('change', () => {
                    let checkedCount = document.querySelectorAll('.main-selection:checked').length;
                    if (checkedCount > MAX_SELECTION) {
                        alert(`You can select a maximum of ${MAX_SELECTION} items.`);
                        item.checked = false;
                    }
                });
            });

            form.addEventListener('submit', (event) => {
                event.preventDefault();

                const studentName = document.getElementById('student-name').value;
                const studentClass = document.getElementById('student-class').value;
                const rollNumber = document.getElementById('roll-number').value;

                const selectedMainItems = Array.from(document.querySelectorAll('.main-selection:checked'))
                    .map(checkbox => checkbox.value);

                const selectedDessertElement = document.querySelector('input[name="dessert"]:checked');
                const selectedDessert = selectedDessertElement ? selectedDessertElement.value : 'None';

                if (selectedMainItems.length === 0) {
                     alert("Please select at least one item from the main menu.");
                     return;
                }

                const selections = {
                    day: "Tuesday",
                    name: studentName,
                    class: studentClass,
                    roll: rollNumber,
                    mainItems: selectedMainItems.join(', '),
                    dessert: selectedDessert
                };

                localStorage.setItem('lunchAppSelection', JSON.stringify(selections));
                window.location.href = 'confirm.html';
            });
        });
    </script>
</body>
</html>
